(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6423],{36423:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RichText:()=>eM});var r=n(90661),l=n(48643),o=n(95155),i=n(92825),a=n(78234),s=n(12115);let u=(0,s.createContext)(null),d={didCatch:!1,error:null};class c extends s.Component{static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,n,r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];null==(t=(n=this.props).onReset)||t.call(n,{args:l,reason:"imperative-api"}),this.setState(d)}}componentDidCatch(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:r}=this.props;if(n&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}(e.resetKeys,r)){var l,o;null==(l=(o=this.props).onReset)||l.call(o,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(d)}}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:l,error:o}=this.state,i=e;if(l){let e={error:o,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)i=t(e);else if(n)i=(0,s.createElement)(n,e);else if(void 0!==r)i=r;else throw o}return(0,s.createElement)(u.Provider,{value:{didCatch:l,error:o,resetErrorBoundary:this.resetErrorBoundary}},i)}constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=d}}n(98195);var f=n(94271),m=n(32532);let p="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,g=p?s.useLayoutEffect:s.useEffect,h={tag:"history-merge"};function y({initialConfig:e,children:t}){let n=(0,s.useMemo)(()=>{let{theme:t,namespace:n,nodes:r,onError:l,editorState:o,html:i}=e,a=(0,f.Mx)(null,t),s=(0,m.ieJ)({editable:e.editable,html:i,namespace:n,nodes:r,onError:e=>l(e,s),theme:t});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=(0,m.NiT)();if(t.isEmpty()){let n=(0,m.lJ7)();t.append(n);let r=p?document.activeElement:null;(null!==(0,m.vJq)()||null!==r&&r===e.getRootElement())&&n.select()}},h);else if(null!==t)switch(typeof t){case"string":{let n=e.parseEditorState(t);e.setEditorState(n,h);break}case"object":e.setEditorState(t,h);break;case"function":e.update(()=>{(0,m.NiT)().isEmpty()&&t(e)},h)}}}(s,o),[s,a]},[]);return g(()=>{let t=e.editable,[r]=n;r.setEditable(void 0===t||t)},[]),(0,o.jsx)(f.Gu.Provider,{value:n,children:t})}var v=n(19749);function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b={error:null},x=function(e){function t(){for(var t,n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).state=b,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,E(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(b)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,l,o,i=this.state.error,a=this.props.resetKeys;null!==i&&null!==t.error&&(void 0===(l=e.resetKeys)&&(l=[]),void 0===(o=a)&&(o=[]),l.length!==o.length||l.some(function(e,t){return!Object.is(e,o[t])}))&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,a),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,r=t.FallbackComponent,l=t.fallback;if(null!==e){var o={error:e,resetErrorBoundary:this.resetErrorBoundary};if(s.isValidElement(l))return l;if("function"==typeof n)return n(o);if(r)return s.createElement(r,o);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(s.Component);function C({children:e,onError:t}){return(0,o.jsx)(x,{fallback:(0,o.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}var k=n(92749);function w(e){e.undoStack=[],e.redoStack=[],e.current=null}function S({delay:e,externalHistoryState:t}){let[n]=(0,f.DF)();return function(e,t,n=1e3){let r=(0,s.useMemo)(()=>t||{current:null,redoStack:[],undoStack:[]},[t]);(0,s.useEffect)(()=>(function(e,t,n){let r,l,o=(r=Date.now(),l=0,(t,o,i,a,s,u)=>{let d=Date.now();if(u.has("historic"))return l=0,r=d,2;let c=function(e,t,n,r,l){if(null===e||0===n.size&&0===r.size&&!l)return 0;let o=t._selection,i=e._selection;if(l)return 1;if(!((0,m.I2P)(o)&&(0,m.I2P)(i)&&i.isCollapsed()&&o.isCollapsed()))return 0;let a=function(e,t,n){let r=e._nodeMap,l=[];for(let e of t){let t=r.get(e);void 0!==t&&l.push(t)}for(let[e,t]of n){if(!t)continue;let n=r.get(e);void 0===n||(0,m.hVZ)(n)||l.push(n)}return l}(t,n,r);if(0===a.length)return 0;if(a.length>1){let n=t._nodeMap,r=n.get(o.anchor.key),l=n.get(i.anchor.key);return r&&l&&!e._nodeMap.has(r.__key)&&(0,m.kFe)(r)&&1===r.__text.length&&1===o.anchor.offset?2:0}let s=a[0],u=e._nodeMap.get(s.__key);if(!(0,m.kFe)(u)||!(0,m.kFe)(s)||u.__mode!==s.__mode)return 0;let d=u.__text,c=s.__text;if(d===c)return 0;let f=o.anchor,p=i.anchor;if(f.key!==p.key||"text"!==f.type)return 0;let g=f.offset,h=p.offset,y=c.length-d.length;return 1===y&&h===g-1?2:-1===y&&h===g+1?3:4*(-1===y&&h===g)}(t,o,a,s,e.isComposing()),f=(()=>{let f=null===i||i.editor===e,p=u.has("history-push");if(!p&&f&&u.has("history-merge"))return 0;if(null===t)return 1;let g=o._selection;return a.size>0||s.size>0?!1===p&&0!==c&&c===l&&d<r+n&&f||1===a.size&&function(e,t,n){let r=t._nodeMap.get(e),l=n._nodeMap.get(e),o=t._selection,i=n._selection;return!((0,m.I2P)(o)&&(0,m.I2P)(i)&&"element"===o.anchor.type&&"element"===o.focus.type&&"text"===i.anchor.type&&"text"===i.focus.type||!(0,m.kFe)(r)||!(0,m.kFe)(l)||r.__parent!==l.__parent)&&JSON.stringify(t.read(()=>r.exportJSON()))===JSON.stringify(n.read(()=>l.exportJSON()))}(Array.from(a)[0],t,o)?0:1:2*(null===g)})();return r=d,l=c,f});return(0,k.Sd)(e.registerCommand(m.ZKf,()=>((function(e,t){let n=t.redoStack,r=t.undoStack;if(0!==r.length){let l=t.current,o=r.pop();null!==l&&(n.push(l),e.dispatchCommand(m.WWb,!0)),0===r.length&&e.dispatchCommand(m.KfJ,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:"historic"})}})(e,t),!0),m.jZM),e.registerCommand(m.V30,()=>((function(e,t){let n=t.redoStack,r=t.undoStack;if(0!==n.length){let l=t.current;null!==l&&(r.push(l),e.dispatchCommand(m.KfJ,!0));let o=n.pop();0===n.length&&e.dispatchCommand(m.WWb,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState,{tag:"historic"})}})(e,t),!0),m.jZM),e.registerCommand(m.SKc,()=>(w(t),!1),m.jZM),e.registerCommand(m.t5V,()=>(w(t),e.dispatchCommand(m.WWb,!1),e.dispatchCommand(m.KfJ,!1),!0),m.jZM),e.registerUpdateListener(({editorState:n,prevEditorState:r,dirtyLeaves:l,dirtyElements:i,tags:a})=>{let s=t.current,u=t.redoStack,d=t.undoStack,c=null===s?null:s.editorState;if(null!==s&&n===c)return;let f=o(r,n,s,l,i,a);if(1===f)0!==u.length&&(t.redoStack=[],e.dispatchCommand(m.WWb,!1)),null!==s&&(d.push({...s}),e.dispatchCommand(m.KfJ,!0));else if(2===f)return;t.current={editor:e,editorState:n}}))})(e,r,n),[n,e,r])}(n,t,e),null}let j="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;function N({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){let[r]=(0,f.DF)();return j(()=>{if(n)return r.registerUpdateListener(({editorState:l,dirtyElements:o,dirtyLeaves:i,prevEditorState:a,tags:s})=>{t&&0===o.size&&0===i.size||e&&s.has("history-merge")||a.isEmpty()||n(l,r,s)})},[r,e,t,n]),null}var _=n(58647);function B(e){return()=>(function(e){if(!function(e,t=!0){if(e)return!1;let n=(0,m.NiT)().getTextContent();return t&&(n=n.trim()),""===n}(e,!1))return!1;let t=(0,m.NiT)().getChildren(),n=t.length;if(n>1)return!1;for(let e=0;e<n;e++){let n=t[e];if((0,m.Cyw)(n))return!1;if((0,m.ff4)(n)){if(!(0,m.bSg)(n)||0!==n.__indent)return!1;let t=n.getChildren(),r=t.length;for(let n=0;n<r;n++){let n=t[e];if(!(0,m.kFe)(n))return!1}}}return!0})(e)}var P=n(47650),F=n(62002);let R="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;function D(e){return e.getEditorState().read(B(e.isComposing()))}function T({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){var r;let[l]=(0,f.DF)(),i=function(e,t){let[n,r]=(0,s.useState)(()=>e.getDecorators());return R(()=>e.registerDecoratorListener(e=>{(0,P.flushSync)(()=>{r(e)})}),[e]),(0,s.useEffect)(()=>{r(e.getDecorators())},[e]),(0,s.useMemo)(()=>{let r=[],l=Object.keys(n);for(let i=0;i<l.length;i++){let a=l[i],u=(0,o.jsx)(t,{onError:t=>e._onError(t),children:(0,o.jsx)(s.Suspense,{fallback:null,children:n[a]})}),d=e.getElementByKey(a);null!==d&&r.push((0,P.createPortal)(u,d,a))}return r},[t,n,e])}(l,n);return R(()=>(0,k.Sd)((0,F.ZI)(r),function(e){let t=window.location.origin,n=n=>{if(n.origin!==t)return;let r=e.getRootElement();if(document.activeElement!==r)return;let l=n.data;if("string"==typeof l){let t;try{t=JSON.parse(l)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let r=t.payload;if(r&&"makeChanges"===r.functionId){let t=r.args;if(t){let[r,l,o,i,a,s]=t;e.update(()=>{let e=(0,m.vJq)();if((0,m.I2P)(e)){let t=e.anchor,s=t.getNode(),u=0,d=0;if((0,m.kFe)(s)&&r>=0&&l>=0&&(u=r,d=r+l,e.setTextNodeRange(s,u,s,d)),u===d&&""===o||(e.insertRawText(o),s=t.getNode()),(0,m.kFe)(s)){u=i,d=i+a;let t=s.getTextContentSize();u=u>t?t:u,d=d>t?t:d,e.setTextNodeRange(s,u,s,d)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(r)),[r=l]),(0,o.jsxs)(o.Fragment,{children:[e,(0,o.jsx)(I,{content:t}),i]})}function I({content:e}){let[t]=(0,f.DF)(),n=function(e){let[t,n]=(0,s.useState)(()=>D(e));return R(()=>{function t(){n(D(e))}return t(),(0,k.Sd)(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),r=(0,_.a)();return n?"function"==typeof e?e(r):e:null}var L=n(77168);let A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect,M=(0,s.forwardRef)(function({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:l,ariaErrorMessage:i,ariaExpanded:a,ariaInvalid:u,ariaLabel:d,ariaLabelledBy:c,ariaMultiline:f,ariaOwns:m,ariaRequired:p,autoCapitalize:g,className:h,id:y,role:v="textbox",spellCheck:E=!0,style:b,tabIndex:x,"data-testid":C,...k},w){let[S,j]=(0,s.useState)(e.isEditable()),N=(0,s.useCallback)(t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView?e.setRootElement(t):e.setRootElement(null)},[e]),_=(0,s.useMemo)(()=>(function(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}})(w,N),[N,w]);return A(()=>(j(e.isEditable()),e.registerEditableListener(e=>{j(e)})),[e]),(0,o.jsx)("div",{"aria-activedescendant":S?t:void 0,"aria-autocomplete":S?n:"none","aria-controls":S?r:void 0,"aria-describedby":l,...null!=i?{"aria-errormessage":i}:{},"aria-expanded":S&&"combobox"===v?!!a:void 0,...null!=u?{"aria-invalid":u}:{},"aria-label":d,"aria-labelledby":c,"aria-multiline":f,"aria-owns":S?m:void 0,"aria-readonly":!S||void 0,"aria-required":p,autoCapitalize:g,className:h,contentEditable:S,"data-testid":C,id:y,ref:_,role:S?v:void 0,spellCheck:E,style:b,tabIndex:x,...k})});function O(e){return e.getEditorState().read(B(e.isComposing()))}let K=(0,s.forwardRef)(function(e,t){let{placeholder:n,...r}=e,[l]=(0,f.DF)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(M,{editor:l,...r,ref:t}),null!=n&&(0,o.jsx)(z,{editor:l,content:n})]})});function z({content:e,editor:t}){let n=function(e){let[t,n]=(0,s.useState)(()=>O(e));return A(()=>{function t(){n(O(e))}return t(),(0,k.Sd)(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t),[r,l]=(0,s.useState)(t.isEditable());if((0,s.useLayoutEffect)(()=>(l(t.isEditable()),t.registerEditableListener(e=>{l(e)})),[t]),!n)return null;let i=null;return"function"==typeof e?i=e(r):null!==e&&(i=e),null===i?null:(0,o.jsx)("div",{"aria-hidden":!0,children:i})}var J=e=>{let{anchorElem:t,clientProps:n,plugin:r}=e;return"floatingAnchorElem"===r.position&&t?r.Component&&(0,o.jsx)(r.Component,{anchorElem:t,clientProps:n}):r.Component&&(0,o.jsx)(r.Component,{clientProps:n})};function q(){let e=(0,v.c)(3),[t]=(0,f.DF)(),n,r;return e[0]!==t?(n=()=>(0,k.Sd)(t.registerCommand(m.d8p,H,m.AcJ),t.registerCommand(m.w$Z,G,m.AcJ),t.registerCommand(m.gCZ,G,m.AcJ),t.registerCommand(m.MvL,U,m.AcJ),t.registerCommand(m.UDz,Z,m.AcJ),t.registerCommand(m.bbF,V,m.AcJ)),r=[t],e[0]=t,e[1]=n,e[2]=r):(n=e[1],r=e[2]),(0,s.useEffect)(n,r),null}function V(e){let t=(0,m.vJq)();if((0,m.RTZ)(t)){var n,r,l;e.preventDefault();let o=null==(n=t.getNodes()[0])?void 0:n.getNextSibling();if((0,m.Cyw)(o)){let e=(0,m.i0_)().getElementByKey(o.getKey());return e&&$({element:e,node:o}),!0}if(!(0,m.ff4)(o))return!0;let i=null!=(l=o.getFirstDescendant())?l:o;return i&&(null==(r=(0,k.Bt)(i,Q))||r.selectEnd(),e.preventDefault()),!0}if(!(0,m.I2P)(t))return!1;let o=(t.isBackward()?t.anchor:t.focus).getNode(),i=(0,k.Bt)(o,W),a=null==i?void 0:i.getNextSibling();if(!i||a!==ee(i))return!1;if((0,m.Cyw)(a)){let t=(0,m.i0_)().getElementByKey(a.getKey());if(t)return $({element:t,node:a}),e.preventDefault(),!0}return!1}function W(e){return null!==ee(e)}function Z(e){let t=(0,m.vJq)();if((0,m.RTZ)(t)){var n,r,l;let o=null==(n=t.getNodes()[0])?void 0:n.getPreviousSibling();if((0,m.Cyw)(o)){let t=(0,m.i0_)().getElementByKey(o.getKey());return!!t&&($({element:t,node:o}),e.preventDefault(),!0)}if(!(0,m.ff4)(o))return!1;let i=null!=(l=o.getLastDescendant())?l:o;return!!i&&(null==(r=(0,k.Bt)(i,Q))||r.selectStart(),e.preventDefault(),!0)}if(!(0,m.I2P)(t))return!1;let o=(t.isBackward()?t.anchor:t.focus).getNode(),i=(0,k.Bt)(o,Y),a=null==i?void 0:i.getPreviousSibling();if(!i||a!==et(i))return!1;if((0,m.Cyw)(a)){let t=(0,m.i0_)().getElementByKey(a.getKey());if(t)return $({element:t,node:a}),e.preventDefault(),!0}return!1}function Y(e){return null!==et(e)}function U(){var e,t;let n=function(){let e=(0,m.vJq)();if(!(0,m.RTZ)(e))return;let t=e.getNodes();if(1!==t.length)return;let n=t[0];return(0,m.Cyw)(n)?{decorator:n,element:(0,m.i0_)().getElementByKey(n.getKey())}:void 0}();return null==(e=document.querySelector(".decorator-selected"))||e.classList.remove("decorator-selected"),!!n&&(null==(t=n.element)||t.classList.add("decorator-selected"),!0)}function H(e){var t;null==(t=document.querySelector(".decorator-selected"))||t.classList.remove("decorator-selected");let n=function(e){if(!(e.target instanceof HTMLElement))return;let t=e.target.closest('[data-lexical-decorator="true"]');if(!(t instanceof HTMLElement))return;let n=(0,m.xL4)(t);return(0,m.Cyw)(n)?{element:t,node:n}:void 0}(e);if(!n)return!0;let{target:r}=e;return!(r instanceof HTMLElement)||r.isContentEditable||r.closest('button, textarea, input, .react-select, .code-editor, .no-select-decorator, [role="button"]')?(0,m.n1P)(null):$(n),!0}function G(e){let t=(0,m.vJq)();return!!(0,m.RTZ)(t)&&(e.preventDefault(),t.getNodes().forEach(X),!0)}function X(e){e.remove()}function $(e){var t;let{element:n,node:r}=e;null==(t=document.querySelector(".decorator-selected"))||t.classList.remove("decorator-selected");let l=(0,m.rUs)();l.add(r.getKey()),(0,m.n1P)(l),n.scrollIntoView({behavior:"smooth",block:"nearest"}),n.classList.add("decorator-selected")}function Q(e){if((0,m.Cyw)(e)&&!e.isInline())return!0;if(!(0,m.ff4)(e)||(0,m.IqF)(e))return!1;let t=e.getFirstChild(),n=null===t||(0,m.wH$)(t)||(0,m.kFe)(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}function ee(e){let t=e.getNextSibling();for(;null!==t;){if(Q(t))return t;t=t.getNextSibling()}return null}function et(e){let t=e.getPreviousSibling();for(;null!==t;){if(Q(t))return t;t=t.getPreviousSibling()}return null}var en=function(e,t,n,r){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:25,i=0;if(e&&!e.contains(r)){let{bottom:r,left:a,right:s,top:u}=e.getBoundingClientRect(),d=u+window.scrollY,c=r+window.scrollY;if(n<d-o||n>c+o||t<a-l||t>s+l)return -1;(t<a||t>s)&&(i=t<a?t-a:t-s)}return i};function er(e){let t=e.getBoundingClientRect(),n=getComputedStyle(e).getPropertyValue("transform");if(!n||"none"===n)return t;let r=n.split(",").pop();return t.y=t.y-Number(null==r?void 0:r.replace(")","")),t}function el(e){let t=(e,t)=>e?parseFloat(window.getComputedStyle(e)[t]):0,{marginBottom:n,marginTop:r}=window.getComputedStyle(e),l=t(e.previousElementSibling,"marginBottom"),o=t(e.nextElementSibling,"marginTop"),i=Math.max(parseFloat(r),l);return{marginBottom:Math.max(parseFloat(n),o),marginTop:i}}function eo(e){return e.getEditorState().read(()=>(0,m.NiT)().getChildrenKeys())}var ei={props:null,result:null};function ea(e){let{anchorElem:t,cache_threshold:n=20,editor:l,fuzzy:o=!1,horizontalOffset:i=0,point:{x:a,y:s},startIndex:u=0,useEdgeAsDefault:d=!1}=e;if(n>0&&ei.props&&ei.result&&ei.props.fuzzy===e.fuzzy&&ei.props.horizontalOffset===e.horizontalOffset&&ei.props.useEdgeAsDefault===e.useEdgeAsDefault&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=e.x-t.x,l=e.y-t.y;return r*r+l*l<=n*n}(ei.props.point,e.point,n))return ei.result;let c=t.getBoundingClientRect(),f=eo(l),p={blockElem:null,blockNode:null,distance:1/0,foundAtIndex:-1,isFoundNodeEmptyParagraph:!1};return l.getEditorState().read(()=>{if(d){let e=l.getElementByKey(f[0]),t=l.getElementByKey(f[f.length-1]);if(e&&t){let[n,r]=[er(e),er(t)];if(s<n.top?(p.blockElem=e,p.distance=n.top-s,p.blockNode=(0,m.nsf)(f[0]),p.foundAtIndex=0):s>r.bottom&&(p.distance=s-r.bottom,p.blockNode=(0,m.nsf)(f[f.length-1]),p.blockElem=t,p.foundAtIndex=f.length-1),null==p?void 0:p.blockElem)return{blockElem:null,isFoundNodeEmptyParagraph:!1}}}let t=u,n=0;for(;t>=0&&t<f.length;){let u=f[t],d=l.getElementByKey(u);if(null===d)break;let g=new r.e(a+i,s),h=r.j.fromDOMRect(er(d)),{marginBottom:y,marginTop:v}=el(d),{distance:E,isOnBottomSide:b,isOnTopSide:x}=h.generateNewRect({bottom:h.bottom+y,left:c.left,right:c.right,top:h.top-v}).distanceFromPoint(g);if(0===E){p.blockElem=d,p.blockNode=(0,m.nsf)(u),p.foundAtIndex=t,p.distance=E,p.blockNode&&"paragraph"===p.blockNode.getType()&&""===p.blockNode.getTextContent()&&(o||e.returnEmptyParagraphs||(p.blockElem=null,p.blockNode=null),p.isFoundNodeEmptyParagraph=!0);break}o&&E<p.distance&&(p.blockElem=d,p.blockNode=(0,m.nsf)(u),p.distance=E,p.foundAtIndex=t),0===n&&(n=x?-1:b?1:1/0),t+=n}}),ei.props=e,ei.result={blockElem:p.blockElem,blockNode:p.blockNode,foundAtIndex:p.foundAtIndex,isFoundNodeEmptyParagraph:p.isFoundNodeEmptyParagraph},{blockElem:p.blockElem,blockNode:p.blockNode,foundAtIndex:p.foundAtIndex,isFoundNodeEmptyParagraph:p.isFoundNodeEmptyParagraph}}function es(e,t){return!!e.closest(".".concat(t))}var eu=["IMG","INPUT","TEXTAREA","SELECT","BUTTON","VIDEO","OBJECT","EMBED","IFRAME","HR"];function ed(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}let l=e.getBoundingClientRect(),o=window.getComputedStyle(e),i=t.getBoundingClientRect(),a=n.getBoundingClientRect(),s;if(["lexical-block","lexical-upload","lexical-relationship"].some(t=>{var n;return null==(n=e.firstElementChild)?void 0:n.classList.contains(t)}))s=l.top+8-a.top;else{let t=!function(e){if(!e||eu.includes(e.tagName)||0===e.offsetHeight||0===e.offsetWidth)return!1;let t=window.getComputedStyle(e);return"table-cell"!==t.display&&"absolute"!==t.position&&"hidden"!==t.visibility&&"0"!==t.opacity}(e)?0:parseInt(o.lineHeight,10);s=l.top+(t-i.height)/2-a.top}t.style.opacity="1",t.style.transform="translate(".concat(r,"px, ").concat(s,"px)")}var ec=1/0;function ef(e){let{anchorElem:t}=e,n=void 0===t?document.body:t,[i]=(0,f.DF)();return function(e,t,n){var i;let a=t.parentElement,{editorConfig:u}=(0,l.b)(),d=(null==u||null==(i=u.admin)?void 0:i.hideGutter)?-24:12,c=(0,s.useRef)(null),[f,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{var n;function l(n){var l;let o=n.target;if(!(0,m.sby)(o))return;let i=en(a,n.pageX,n.pageY,o);if(-1===i)return void p(null);if(es(o,"add-block-menu"))return;let s=eo(e),{blockElem:u,blockNode:d,foundAtIndex:c}=ea({anchorElem:t,cache_threshold:0,editor:e,horizontalOffset:-i,point:new r.e(n.x,n.y),returnEmptyParagraphs:!0,startIndex:0===(l=s.length)?1/0:ec>=0&&ec<l?ec:Math.floor(l/2),useEdgeAsDefault:!1});ec=c,u&&d&&((null==f?void 0:f.node)!==d||(null==f?void 0:f.elem)!==u)&&p({elem:u,node:d})}return null==(n=document)||n.addEventListener("mousemove",l),()=>{var e;null==(e=document)||e.removeEventListener("mousemove",l)}},[a,t,e,f]),(0,s.useEffect)(()=>{c.current&&(null==f?void 0:f.node)&&ed(null==f?void 0:f.elem,c.current,t,d)},[t,f,d]);let g=(0,s.useCallback)(t=>{let n=f;(null==n?void 0:n.node)&&(e.update(()=>{let t=!0;if(((null==n?void 0:n.node.getType())!=="paragraph"||""!==n.node.getTextContent())&&(t=!1),!t){let t=(0,m.lJ7)();null==n||n.node.insertAfter(t),setTimeout(()=>{p(n={elem:e.getElementByKey(t.getKey()),node:t})},0)}}),setTimeout(()=>{e.update(()=>{e.focus(),(null==n?void 0:n.node)&&"select"in n.node&&"function"==typeof n.node.select&&n.node.select()})},1),setTimeout(()=>{e.dispatchCommand(r.h,{node:null==n?void 0:n.node})},2),t.stopPropagation(),t.preventDefault())},[e,f]);return(0,P.createPortal)((0,o.jsx)(s.Fragment,{children:(0,o.jsx)("button",{"aria-label":"Add block",className:"icon add-block-menu",onClick:e=>{g(e)},ref:c,type:"button",children:(0,o.jsx)("div",{className:n?"icon":""})})}),t)}(i,n,i._editable)}var em=0,ep="application/x-lexical-drag-block",eg=1/0;function eh(e){return 0===e?1/0:eg>=0&&eg<e?eg:Math.floor(e/2)}function ey(e,t){e&&(e.style.opacity="0"),t&&(t.style.opacity="",t.style.marginBottom="",t.style.marginTop="")}function ev(e){let{anchorElem:t}=e,n=void 0===t?document.body:t,[i]=(0,f.DF)();return function(e,t,n){var i,a;let u=t.parentElement,d=(0,s.useRef)(null),c=(0,s.useRef)(null),f=(0,s.useRef)(null),p=(0,s.useRef)(!1),[g,h]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),{editorConfig:E}=(0,l.b)(),b=(null==E||null==(i=E.admin)?void 0:i.hideGutter)?-44:-8;return(0,s.useEffect)(()=>{var n;function l(n){let l=n.target;if(!(0,m.sby)(l))return;let o=en(u,n.pageX,n.pageY,l);if(-1===o)return void h(null);if(es(l,"draggable-block-menu"))return;let i=eo(e),{blockElem:a,foundAtIndex:s,isFoundNodeEmptyParagraph:d}=ea({anchorElem:t,cache_threshold:0,editor:e,horizontalOffset:-o,point:new r.e(n.x,n.y),startIndex:eh(i.length),useEdgeAsDefault:!1,verbose:!1});eg=s,(a||d)&&g!==a&&h(a)}return null==(n=document)||n.addEventListener("mousemove",l),()=>{var e;null==(e=document)||e.removeEventListener("mousemove",l)}},[u,t,e,g]),(0,s.useEffect)(()=>{d.current&&ed(g,d.current,t,b)},[t,g,b]),(0,s.useEffect)(()=>{function n(n){if(!p.current)return!1;let[l]=(0,F.gA)(n);if(l)return!1;let{pageY:o,target:i}=n;if(!(0,m.sby)(i))return!1;let a=en(u,n.pageX,n.pageY,i,100,50),s=eo(e),{blockElem:h,foundAtIndex:x,isFoundNodeEmptyParagraph:C}=ea({anchorElem:t,editor:e,fuzzy:!0,horizontalOffset:-a,point:new r.e(n.x,n.y),startIndex:eh(s.length),useEdgeAsDefault:!0,verbose:!0});eg=x;let k=c.current;if(null===h||null===k)return!1;if(g!==h){var w,S,j,N,_,B,P,R;let{isBelow:e,willStayInSamePosition:r}=function(e,t,n,r,l,o,i,a,s){let u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],{height:d,top:c}=r.getBoundingClientRect(),{top:f,width:m}=i.getBoundingClientRect(),{marginBottom:p,marginTop:g}=el(r),h=c,y=o>=c+d/2+window.scrollY,v=!1;if(null==l?void 0:l.elem)if(r!==(null==l?void 0:l.elem))(y&&(null==l?void 0:l.elem)&&(null==l?void 0:l.elem)===r.nextElementSibling||!y&&(null==l?void 0:l.elem)&&(null==l?void 0:l.elem)===r.previousElementSibling)&&++em<200&&(v=!0);else{var E;em++;let e=null==l||null==(E=l.boundingBox)?void 0:E.y,t=r.getBoundingClientRect().y;(y===(null==l?void 0:l.isBelow)&&e===t||em<200)&&(v=!1)}if(v)return{isBelow:y,willStayInSamePosition:v};u?h+=d/2:y?h+=d+p/2:h-=g/2;let b=0;u||(b=y?-0:0);let x=h-f+b;return n.style.width="calc(".concat(m,"px - ").concat(e,")"),n.style.opacity=".8",n.style.transform="translate(".concat(-24-t,"px, calc(").concat(x,"px - 2px))"),(null==l?void 0:l.elem)&&(l.elem.style.opacity="",(null==l?void 0:l.elem)===r?y?l.elem.style.marginTop="":l.elem.style.marginBottom="":(l.elem.style.marginBottom="",l.elem.style.marginTop="")),em=0,{isBelow:y,willStayInSamePosition:v}}((null==E||null==(w=E.admin)?void 0:w.hideGutter)?"0px":"3rem",b+((null==E||null==(S=E.admin)?void 0:S.hideGutter)?null!=(P=null==d||null==(N=d.current)||null==(j=N.getBoundingClientRect())?void 0:j.width)?P:0:-(null!=(R=null==d||null==(B=d.current)||null==(_=B.getBoundingClientRect())?void 0:_.width)?R:0)),k,h,y,o,t,n,f,C);n.preventDefault(),r||v({boundingBox:h.getBoundingClientRect(),elem:h,isBelow:e})}else(null==y?void 0:y.elem)&&(ey(k,y.elem),v({boundingBox:h.getBoundingClientRect(),elem:h,isBelow:!1}));return!0}function l(n){if(!p.current)return!1;let[l]=(0,F.gA)(n);if(l)return!1;let{dataTransfer:o,pageY:i,target:a}=n,s=(null==o?void 0:o.getData(ep))||"";return e.update(()=>{let l=(0,m.nsf)(s);if(!l||!(0,m.sby)(a))return!1;let{blockElem:o,isFoundNodeEmptyParagraph:d}=ea({anchorElem:t,editor:e,fuzzy:!0,horizontalOffset:-en(u,n.pageX,n.pageY,a,100,50),point:new r.e(n.x,n.y),useEdgeAsDefault:!0});if(!o)return!1;let c=(0,m.xL4)(o);if(!c)return!1;if(c===l)return!0;let{height:f,top:p}=er(o),y=i>=p+f/2+window.scrollY;d?(c.insertBefore(l),c.remove()):y?c.insertAfter(l):c.insertBefore(l),null!==g&&h(null),document.querySelectorAll(".lexical-block-highlighter").forEach(e=>{e.remove()});let v=e.getElementByKey(l.getKey());setTimeout(()=>{let e=null==v?void 0:v.getBoundingClientRect();if(!e)return;let t=document.createElement("div");t.className="lexical-block-highlighter",t.style.backgroundColor="var(--theme-elevation-1000",t.style.transition="opacity 0.5s ease-in-out",t.style.zIndex="1",t.style.pointerEvents="none",t.style.boxSizing="border-box",t.style.borderRadius="4px",t.style.position="absolute",document.body.appendChild(t),t.style.opacity="0.1",t.style.height="".concat(e.height+8,"px"),t.style.width="".concat(e.width+8,"px"),t.style.top="".concat(e.top+window.scrollY-4,"px"),t.style.left="".concat(e.left-4,"px"),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.remove()},500)},1e3)},120)}),!0}return document.addEventListener("dragover",n),document.addEventListener("drop",l),()=>{document.removeEventListener("dragover",n),document.removeEventListener("drop",l)}},[u,b,t,e,y,g,null==E||null==(a=E.admin)?void 0:a.hideGutter]),(0,P.createPortal)((0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)("div",{className:"icon draggable-block-menu",draggable:!0,onDragEnd:function(){p.current=!1,(null==y?void 0:y.elem)&&ey(c.current,null==y?void 0:y.elem)},onDragStart:function(t){let n=t.dataTransfer;if(!n||!g)return;!function(e,t){let{transform:n}=t.style;e.setDragImage(t,0,0),setTimeout(()=>{t.style.transform=n})}(n,g);let r="";e.update(()=>{let e=(0,m.xL4)(g);e&&(r=e.getKey())}),p.current=!0,n.setData(ep,r)},ref:d,children:(0,o.jsx)("div",{className:n?"icon":""})}),(0,o.jsx)("div",{className:"draggable-block-target-line",ref:c}),(0,o.jsx)("div",{className:"debug-highlight",ref:f})]}),t)}(i,n,i._editable)}var eE="insert-paragraph-at-end",eb=()=>{var e;let t,n=(0,v.c)(4),[r]=(0,f.DF)(),{editorConfig:i}=(0,l.b)();if(null==i||null==(e=i.admin)?void 0:e.hideInsertParagraphAtEnd)return null;n[0]!==r?(t=()=>{r.update(ex)},n[0]=r,n[1]=t):t=n[1];let a=t,s;return n[2]!==a?(s=(0,o.jsx)("div",{"aria-label":"Insert Paragraph",className:eE,onClick:a,role:"button",tabIndex:0,children:(0,o.jsx)("div",{className:"".concat(eE,"-inside"),children:(0,o.jsx)("span",{children:"+"})})}),n[2]=a,n[3]=s):s=n[3],s};function ex(){let e=(0,m.lJ7)();(0,m.NiT)().append(e),e.select()}var eC=()=>{let e=(0,v.c)(4),{editorConfig:t}=(0,l.b)(),[n]=(0,f.DF)(),o,i;return e[0]!==n||e[1]!==t.features.markdownTransformers?(o=()=>{var e;return(0,r.b)(n,null!=(e=t.features.markdownTransformers)?e:[])},i=[n,t.features.markdownTransformers],e[0]=n,e[1]=t.features.markdownTransformers,e[2]=o,e[3]=i):(o=e[2],i=e[3]),s.useEffect(o,i),null},ek="slash-menu-popup";function ew(e){let{isSelected:t,item:n,onClick:r,onMouseEnter:i,ref:a}=e,{fieldProps:{featureClientSchemaMap:s,schemaPath:u}}=(0,l.b)(),{i18n:d}=(0,L.d)(),c="".concat(ek,"__item ").concat(ek,"__item-").concat(n.key);t&&(c+=" ".concat(ek,"__item--selected"));let f=n.key;return n.label&&(f="function"==typeof n.label?n.label({featureClientSchemaMap:s,i18n:d,schemaPath:u}):n.label),f.length>25&&(f=f.substring(0,25)+"..."),(0,o.jsxs)("button",{"aria-selected":t,className:c,id:ek+"__item-"+n.key,onClick:r,onMouseEnter:i,ref:a,role:"option",tabIndex:-1,type:"button",children:[(null==n?void 0:n.Icon)&&(0,o.jsx)(n.Icon,{}),(0,o.jsx)("span",{className:"".concat(ek,"__item-text"),children:f})]},n.key)}function eS(e){let{anchorElem:t=document.body}=e,[n]=(0,f.DF)(),[i,a]=(0,s.useState)(null),{editorConfig:u}=(0,l.b)(),{i18n:d}=(0,L.d)(),{fieldProps:{featureClientSchemaMap:c,schemaPath:m}}=(0,l.b)(),p=function(e,t){let n=(0,v.c)(4),{maxLength:l,minLength:o}=t,i=void 0===l?75:l,a=void 0===o?1:o,s;return n[0]!==i||n[1]!==a||"/"!==n[2]?(s=t=>{let{query:n}=t,l="[^/"+r.g+"\\s]",o=RegExp("(^|\\s|\\()(["+e+"]((?:"+l+"){0,"+i+"}))$").exec(n);if(null!==o){let e=o[1],t=o[3];if(t.length>=a)return{leadOffset:o.index+e.length,matchingString:t,replaceableString:o[2]}}return null},n[0]=i,n[1]=a,n[2]=e,n[3]=s):s=n[3],s}("/",{minLength:0}),g=(0,s.useCallback)(()=>{let e=[];for(let t of u.features.slashMenu.dynamicGroups)if(i){let r=t({editor:n,queryString:i});e=e.concat(r)}return e},[n,i,null==u?void 0:u.features]),h=(0,s.useMemo)(()=>{var e,t;let n=[];for(let t of null!=(e=null==u?void 0:u.features.slashMenu.groups)?e:[])n.push(t);if(i)for(let e of(n=(n=n.map(e=>{let t=e.items.filter(e=>{let t=e.key;return e.label&&(t="function"==typeof e.label?e.label({featureClientSchemaMap:c,i18n:d,schemaPath:m}):e.label),!!RegExp(i,"gi").exec(t)||null!=e.keywords&&e.keywords.some(e=>RegExp(i,"gi").exec(e))});return t.length?{...e,items:t}:null})).filter(e=>null!=e),g())){let r=n.find(t=>t.key===e.key);r?n=n.filter(t=>t.key!==e.key):r={...e,items:[]},(null==r||null==(t=r.items)?void 0:t.length)&&(r.items=r.items.concat(r.items)),n.push(r)}return n},[i,null==u?void 0:u.features.slashMenu.groups,g,c,d,m]);return(0,o.jsx)(r.i,{anchorElem:t,groups:h,menuRenderFn:(e,t)=>{let{selectedItemKey:n,selectItemAndCleanUp:r,setSelectedItemKey:l}=t;return e.current&&h.length?P.createPortal((0,o.jsx)("div",{className:ek,children:h.map(e=>{let t=e.key;return e.label&&c&&(t="function"==typeof e.label?e.label({featureClientSchemaMap:c,i18n:d,schemaPath:m}):e.label),(0,o.jsxs)("div",{className:"".concat(ek,"__group ").concat(ek,"__group-").concat(e.key),children:[(0,o.jsx)("div",{className:"".concat(ek,"__group-title"),children:t}),e.items.map((e,t)=>(0,o.jsx)(ew,{index:t,isSelected:n===e.key,item:e,onClick:()=>{l(e.key),r(e)},onMouseEnter:()=>{l(e.key)},ref:t=>{e.ref={current:t}}},e.key))]},e.key)})}),e.current):null},onQueryChange:a,triggerFn:p})}function ej(e){let t,n=(0,v.c)(6),{features:r}=e,[l]=(0,f.DF)(),o;return n[0]!==l||n[1]!==r.enabledFormats?(o=()=>{var e;let t,n,o=(e=r.enabledFormats,t=Object.keys(m.LZn),n=new Set(e),t.filter(e=>!n.has(e)));if(0!==o.length)return l.registerNodeTransform(m.Ey8,e=>{o.forEach(t=>{e.hasFormat(t)&&e.toggleFormat(t)})})},n[0]=l,n[1]=r.enabledFormats,n[2]=o):o=n[2],n[3]!==l||n[4]!==r?(t=[l,r],n[3]=l,n[4]=r,n[5]=t):t=n[5],(0,s.useEffect)(o,t),null}function eN(e){var t,n,r,l,i,a;let s=(0,v.c)(7),{className:u,editorConfig:d}=e,{t:c}=(0,L.d)(),f;if(s[0]!==u||s[1]!==(null==d||null==(t=d.admin)?void 0:t.placeholder)||s[2]!==c){let e;s[4]!==(null==d||null==(n=d.admin)?void 0:n.placeholder)||s[5]!==c?(e=null!=(a=null==d||null==(r=d.admin)?void 0:r.placeholder)?a:c("lexical:general:placeholder"),s[4]=null==d||null==(l=d.admin)?void 0:l.placeholder,s[5]=c,s[6]=e):e=s[6],f=(0,o.jsx)(K,{"aria-placeholder":c("lexical:general:placeholder"),className:null!=u?u:"ContentEditable__root",placeholder:(0,o.jsx)("p",{className:"editor-placeholder",children:e})}),s[0]=u,s[1]=null==d||null==(i=d.admin)?void 0:i.placeholder,s[2]=c,s[3]=f}else f=s[3];return f}var e_=e=>{let t,n=(0,v.c)(19),{editorConfig:r,editorContainerRef:i,isSmallWidthViewport:a,onChange:u}=e,d=(0,l.b)(),[c]=(0,f.DF)(),[p,g]=(0,s.useState)(null),h;n[0]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{null!==e&&g(e)},n[0]=h):h=n[0];let y=h,E,b;if(n[1]!==c||n[2]!==d?(E=()=>{var e,t;if(!(null==d?void 0:d.uuid))return void console.error("Lexical Editor must be used within an EditorConfigProvider");(null==d||null==(e=d.parentEditor)?void 0:e.uuid)&&(null==(t=d.parentEditor)||t.registerChild(d.uuid,d));let n=()=>{d.focusEditor(d)},r=()=>{d.blurEditor(d)},l=c.registerCommand(m.$7r,()=>(n(),!0),m.AcJ),o=c.registerCommand(m.I2H,()=>(r(),!0),m.AcJ);return()=>{var e,t;l(),o(),null==(t=d.parentEditor)||null==(e=t.unregisterChild)||e.call(t,d.uuid)}},b=[c,d],n[1]=c,n[2]=d,n[3]=E,n[4]=b):(E=n[3],b=n[4]),(0,s.useEffect)(E,b),n[5]!==c||n[6]!==r||n[7]!==i||n[8]!==p||n[9]!==a||n[10]!==u){var x,k,w,j,_,B,P,F;let e,l;n[12]!==u?(e=(e,t,n)=>{(!n.has("focus")||n.size>1)&&(null==u||u(e,t,n))},n[12]=u,n[13]=e):e=n[13],n[14]!==c||n[15]!==r.features.plugins||n[16]!==p||n[17]!==a?(l=p&&(0,o.jsxs)(s.Fragment,{children:[!a&&c.isEditable()&&(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(ev,{anchorElem:p}),(0,o.jsx)(ef,{anchorElem:p})]}),null==(x=r.features.plugins)?void 0:x.map(e=>{if("floatingAnchorElem"===e.position&&!(!0===e.desktopOnly&&a))return(0,o.jsx)(J,{anchorElem:p,clientProps:e.clientProps,plugin:e},e.key)}),c.isEditable()&&(0,o.jsx)(s.Fragment,{children:(0,o.jsx)(eS,{anchorElem:p})})]}),n[14]=c,n[15]=r.features.plugins,n[16]=p,n[17]=a,n[18]=l):l=n[18],t=(0,o.jsxs)(s.Fragment,{children:[null==(k=r.features.plugins)?void 0:k.map(eB),(0,o.jsxs)("div",{className:"editor-container",ref:i,children:[null==(w=r.features.plugins)?void 0:w.map(eP),(0,o.jsx)(T,{contentEditable:(0,o.jsx)("div",{className:"editor-scroller",children:(0,o.jsx)("div",{className:"editor",ref:y,children:(0,o.jsx)(eN,{editorConfig:r})})}),ErrorBoundary:C}),(0,o.jsx)(eb,{}),(0,o.jsx)(q,{}),(0,o.jsx)(ej,{features:r.features}),(0,o.jsx)(N,{ignoreSelectionChange:!0,onChange:e}),l,c.isEditable()&&(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(S,{}),(null==r||null==(_=r.features)||null==(j=_.markdownTransformers)?void 0:j.length)>0&&(0,o.jsx)(eC,{})]}),null==(B=r.features.plugins)?void 0:B.map(eF),null==(P=r.features.plugins)?void 0:P.map(eR)]}),null==(F=r.features.plugins)?void 0:F.map(eD)]}),n[5]=c,n[6]=r,n[7]=i,n[8]=p,n[9]=a,n[10]=u,n[11]=t}else t=n[11];return t};function eB(e){if("aboveContainer"===e.position)return(0,o.jsx)(J,{clientProps:e.clientProps,plugin:e},e.key)}function eP(e){if("top"===e.position)return(0,o.jsx)(J,{clientProps:e.clientProps,plugin:e},e.key)}function eF(e){if("normal"===e.position)return(0,o.jsx)(J,{clientProps:e.clientProps,plugin:e},e.key)}function eR(e){if("bottom"===e.position)return(0,o.jsx)(J,{clientProps:e.clientProps,plugin:e},e.key)}function eD(e){if("belowContainer"===e.position)return(0,o.jsx)(J,{clientProps:e.clientProps,plugin:e},e.key)}var eT=e=>{let{children:t,providers:n}=e;if(!(null==n?void 0:n.length))return t;let r=n[0];return n.length>1?(0,o.jsx)(r,{children:(0,o.jsx)(eT,{providers:n.slice(1),children:t})}):(0,o.jsx)(r,{children:t})},eI=e=>{let{composerKey:t,editorConfig:n,fieldProps:a,isSmallWidthViewport:u,onChange:d,readOnly:c,value:f}=e,m=(0,l.b)(),p=(0,i.useEditDepth)(),g=s.useRef(null),h=(0,s.useMemo)(()=>{if(f&&"object"!=typeof f)throw Error("The value passed to the Lexical editor is not an object. This is not supported. Please remove the data from the field and start again. This is the value that was passed in: "+JSON.stringify(f));if(f&&Array.isArray(f)&&!("root"in f))throw Error("You have tried to pass in data from the old Slate editor to the new Lexical editor. The data structure is different, thus you will have to migrate your data. We offer a one-line migration script which migrates all your rich text fields: https://payloadcms.com/docs/lexical/migration#migration-via-migration-script-recommended");if(f&&"jsonContent"in f)throw Error("You have tried to pass in data from payload-plugin-lexical. The data structure is different, thus you will have to migrate your data. Migration guide: https://payloadcms.com/docs/lexical/migration#migrating-from-payload-plugin-lexical");return{editable:!0!==c,editorState:null!=f?JSON.stringify(f):void 0,namespace:n.lexical.namespace,nodes:(0,r.k)({editorConfig:n}),onError:e=>{throw e},theme:n.lexical.theme}},[n]);return h?(0,o.jsx)(y,{initialConfig:h,children:(0,o.jsx)(l.a,{editorConfig:n,editorContainerRef:g,fieldProps:a,parentContext:(null==m?void 0:m.editDepth)===p?m:void 0,children:(0,o.jsx)(eT,{providers:n.features.providers,children:(0,o.jsx)(e_,{editorConfig:n,editorContainerRef:g,isSmallWidthViewport:u,onChange:d})})})},t+h.editable):(0,o.jsx)("p",{children:"Loading..."})},eL="rich-text-lexical";function eA(e){let{error:t}=e;return(0,o.jsxs)("div",{className:"errorBoundary",role:"alert",children:[(0,o.jsx)("p",{children:"Something went wrong:"}),(0,o.jsx)("pre",{style:{color:"red"},children:t.message})]})}var eM=e=>{var t;let{editorConfig:n,field:r,field:{name:l,admin:{className:u,description:d,readOnly:f}={},label:m,localized:p,required:g},path:h,readOnly:y,validate:v}=e,E=null!=h?h:l,b=(0,i.useEditDepth)(),x=(0,s.useCallback)((e,t)=>"function"!=typeof v||v(e,{...t,required:g}),[v,g]),{customComponents:{AfterInput:C,BeforeInput:k,Description:w,Error:S,Label:j}={},disabled:N,initialValue:_,setValue:B,showError:P,value:F}=(0,i.useField)({path:E,validate:x}),R=y||f||N,[D,T]=(0,s.useState)(!1),[I,L]=(0,s.useState)(),A=s.useRef(_),M=s.useRef(F);(0,s.useEffect)(()=>{let e=()=>{let e=window.matchMedia("(max-width: 768px)").matches;e!==D&&T(e)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[D]);let O=[eL,"field-type",u,P&&"error",R&&"".concat(eL,"--read-only"),(null==n||null==(t=n.admin)?void 0:t.hideGutter)!==!0&&!D?"".concat(eL,"--show-gutter"):null].filter(Boolean).join(" "),K="".concat(E,".").concat(b),z=(0,s.useCallback)(e=>{let t=e.toJSON();M.current=t,B(t)},[B]),J=(0,s.useMemo)(()=>(0,a.FR)(r),[r]),q=(0,i.useEffectEvent)(e=>{M.current!==F&&JSON.stringify(M.current)!==JSON.stringify(F)&&(A.current=e,M.current=F,L(new Date))});return(0,s.useEffect)(()=>{Object.is(_,A.current)||q(_)},[_]),(0,o.jsxs)("div",{className:O,style:J,children:[(0,o.jsx)(i.RenderCustomComponent,{CustomComponent:S,Fallback:(0,o.jsx)(i.FieldError,{path:E,showError:P})}),j||(0,o.jsx)(i.FieldLabel,{label:m,localized:p,path:E,required:g}),(0,o.jsxs)("div",{className:"".concat(eL,"__wrap"),children:[(0,o.jsxs)(c,{fallbackRender:eA,onReset:()=>{},children:[k,(0,o.jsx)(eI,{composerKey:K,editorConfig:n,fieldProps:e,isSmallWidthViewport:D,onChange:z,readOnly:R,value:F},JSON.stringify({path:E,rerenderProviderKey:I})),C]}),w,(0,o.jsx)(i.RenderCustomComponent,{CustomComponent:w,Fallback:(0,o.jsx)(i.FieldDescription,{description:d,path:E})})]})]},K)}},98195:()=>{}}]);