"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5121],{11981:(e,a,t)=>{t.d(a,{ResetPreferences:()=>c});var n=t(19749),l=t(95155),i=t(92825),r=t(77168),s=t(46205),o=t(12115);let u="confirm-reset-modal",c=e=>{let a,t,c,d=(0,n.c)(9),{apiRoute:m,user:h}=e,{openModal:g}=(0,i.useModal)(),{t:p}=(0,r.d)();d[0]!==m||d[1]!==h?(a=async()=>{if(!h)return;let e=s.A({depth:0,where:{user:{id:{equals:h.id}}}},{addQueryPrefix:!0});try{let a=await fetch("".concat(m,"/payload-preferences").concat(e),{credentials:"include",headers:{"Content-Type":"application/json"},method:"DELETE"}),t=(await a.json()).message;a.ok?i.toast.success(t):i.toast.error(t)}catch(e){}},d[0]=m,d[1]=h,d[2]=a):a=d[2];let f=a;return d[3]!==g?(t=()=>g(u),d[3]=g,d[4]=t):t=d[4],d[5]!==f||d[6]!==p||d[7]!==t?(c=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)(i.Button,{buttonStyle:"secondary",onClick:t,children:p("general:resetPreferences")})}),(0,l.jsx)(i.ConfirmationModal,{body:p("general:resetPreferencesDescription"),confirmingLabel:p("general:resettingPreferences"),heading:p("general:resetPreferences"),modalSlug:u,onConfirm:f})]}),d[5]=f,d[6]=p,d[7]=t,d[8]=c):c=d[8],c}},19557:(e,a,t)=>{t.d(a,{ToggleTheme:()=>o});var n=t(19749),l=t(95155),i=t(25866),r=t(77168),s=t(92825);t(12115);let o=()=>{let e,a,t=(0,n.c)(7),{autoMode:o,setTheme:u,theme:c}=(0,i.h)(),{t:d}=(0,r.d)();t[0]!==u?(e=e=>{u(e)},t[0]=u,t[1]=e):e=t[1];let m=e;return t[2]!==o||t[3]!==m||t[4]!==d||t[5]!==c?(a=(0,l.jsx)(s.RadioGroupField,{disableModifyingForm:!0,field:{name:"theme",label:d("general:adminTheme"),options:[{label:d("general:automatic"),value:"auto"},{label:d("general:light"),value:"light"},{label:d("general:dark"),value:"dark"}]},onChange:m,path:"theme",value:o?"auto":c}),t[2]=o,t[3]=m,t[4]=d,t[5]=c,t[6]=a):a=t[6],a}},24404:(e,a,t)=>{t.d(a,{AccountClient:()=>s});var n=t(19749),l=t(92825),i=t(77168),r=t(12115);let s=()=>{let e,a,t=(0,n.c)(4),{setStepNav:s}=(0,l.useStepNav)(),{t:o}=(0,i.d)();return t[0]!==s||t[1]!==o?(e=()=>{let e=[];e.push({label:o("authentication:account"),url:"/account"}),s(e)},a=[s,o],t[0]=s,t[1]=o,t[2]=e,t[3]=a):(e=t[2],a=t[3]),r.useEffect(e,a),null}},50031:(e,a,t)=>{t.d(a,{LoginForm:()=>p});var n=t(19749),l=t(95155),i=t(12115),r=t(25866),s=t(77168),o=t(92825);let u=e=>({canLoginWithEmail:!e||e.allowEmailLogin,canLoginWithUsername:!!e});var c=t(6001);let d=(e,a="/")=>{let t;if("string"!=typeof e)return a;try{t=decodeURIComponent(e.trim())}catch{return a}return!t.startsWith("/")||t.startsWith("//")||t.startsWith("/%2F")||t.startsWith("/\\/")||t.startsWith("/\\\\")||t.startsWith("/\\")||t.toLowerCase().startsWith("/javascript:")||t.toLowerCase().startsWith("/http")?a:t};var m=t(48493);let h=e=>{let a=(0,n.c)(11),{type:t,required:i}=e,r=void 0===i||i,{t:u}=(0,s.d)();if("email"===t){let e;return a[0]!==r||a[1]!==u?(e=(0,l.jsx)(o.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:u("general:email"),required:r},path:"email",validate:m.Rp}),a[0]=r,a[1]=u,a[2]=e):e=a[2],e}if("username"===t){let e;return a[3]!==r||a[4]!==u?(e=(0,l.jsx)(o.TextField,{field:{name:"username",label:u("authentication:username"),required:r},path:"username",validate:m.Xh}),a[3]=r,a[4]=u,a[5]=e):e=a[5],e}if("emailOrUsername"===t){let e;if(a[6]!==r||a[7]!==u){let t;a[9]!==u?(t=(e,a)=>{let t=(0,m.Xh)(e,a),n=(0,m.Rp)(e,a);return!!n||!!t||"".concat(u("general:email"),": ").concat(n," ").concat(u("general:username"),": ").concat(t)},a[9]=u,a[10]=t):t=a[10],e=(0,l.jsx)(o.TextField,{field:{name:"username",label:u("authentication:emailOrUsername"),required:r},path:"username",validate:t}),a[6]=r,a[7]=u,a[8]=e}else e=a[8];return e}return null},g="login__form",p=e=>{let a,t,m,p,f=(0,n.c)(23),{prefillEmail:v,prefillPassword:x,prefillUsername:w,searchParams:j}=e,{config:b,getEntityConfig:S}=(0,r.b)(),{admin:F,routes:y}=b,{routes:P,user:C}=F,{forgot:R}=P,{admin:k,api:T}=y;if(f[0]!==S||f[1]!==C){let{auth:e}=S({collectionSlug:C});t=u(a=e.loginWithUsername),f[0]=S,f[1]=C,f[2]=a,f[3]=t}else a=f[2],t=f[3];let{canLoginWithEmail:E,canLoginWithUsername:W}=t;f[4]!==E||f[5]!==W?(m=()=>E&&W?"emailOrUsername":W?"username":"email",f[4]=E,f[5]=W,f[6]=m):m=f[6];let[O]=i.useState(m),{t:_}=(0,s.d)(),{setUser:U}=(0,o.useAuth)(),q=null!=x?x:void 0,L=null!=x?x:void 0;if(f[7]!==k||f[8]!==T||f[9]!==R||f[10]!==O||f[11]!==a||f[12]!==v||f[13]!==w||f[14]!==(null==j?void 0:j.redirect)||f[15]!==U||f[16]!==_||f[17]!==q||f[18]!==L||f[19]!==C){let e,t={password:{initialValue:q,valid:!0,value:L}};a?t.username={initialValue:null!=w?w:void 0,valid:!0,value:null!=w?w:void 0}:t.email={initialValue:null!=v?v:void 0,valid:!0,value:null!=v?v:void 0},f[21]!==U?(e=e=>{U(e)},f[21]=U,f[22]=e):e=f[22];let n=e;p=(0,l.jsxs)(o.Form,{action:"".concat(T,"/").concat(C,"/login"),className:g,disableSuccessStatus:!0,initialState:t,method:"POST",onSuccess:n,redirect:d(null==j?void 0:j.redirect,k),waitForAutocomplete:!0,children:[(0,l.jsxs)("div",{className:"".concat(g,"__inputWrap"),children:[(0,l.jsx)(h,{type:O}),(0,l.jsx)(o.PasswordField,{field:{name:"password",label:_("general:password"),required:!0},path:"password"})]}),(0,l.jsx)(o.Link,{href:(0,c.Q)({adminRoute:k,path:R}),prefetch:!1,children:_("authentication:forgotPasswordQuestion")}),(0,l.jsx)(o.FormSubmit,{size:"large",children:_("authentication:login")})]}),f[7]=k,f[8]=T,f[9]=R,f[10]=O,f[11]=a,f[12]=v,f[13]=w,f[14]=null==j?void 0:j.redirect,f[15]=U,f[16]=_,f[17]=q,f[18]=L,f[19]=C,f[20]=p}else p=f[20];return p}},58029:(e,a,t)=>{t.d(a,{ResetPasswordForm:()=>d});var n=t(19749),l=t(95155),i=t(77168),r=t(25866),s=t(92825),o=t(35695),u=t(6001);t(12115);let c={"confirm-password":{initialValue:"",valid:!1,value:""},password:{initialValue:"",valid:!1,value:""}},d=e=>{let a,t,d=(0,n.c)(11),{token:m}=e,h=(0,i.d)(),{config:g}=(0,r.b)(),{admin:p,routes:f,serverURL:v}=g,{routes:x,user:w}=p,{login:j}=x,{admin:b,api:S}=f,F=(0,o.useRouter)(),{fetchFullUser:y}=(0,s.useAuth)();d[0]!==b||d[1]!==y||d[2]!==F||d[3]!==j?(a=async()=>{await y()?F.push(b):F.push((0,u.Q)({adminRoute:b,path:j}))},d[0]=b,d[1]=y,d[2]=F,d[3]=j,d[4]=a):a=d[4];let P=a,C="".concat(v).concat(S,"/").concat(w,"/reset-password");return d[5]!==h||d[6]!==P||d[7]!==C||d[8]!==m||d[9]!==w?(t=(0,l.jsxs)(s.Form,{action:C,initialState:c,method:"POST",onSuccess:P,children:[(0,l.jsxs)("div",{className:"inputWrap",children:[(0,l.jsx)(s.PasswordField,{field:{name:"password",label:h.t("authentication:newPassword"),required:!0},path:"password",schemaPath:"".concat(w,".password")}),(0,l.jsx)(s.ConfirmPasswordField,{}),(0,l.jsx)(s.HiddenField,{path:"token",schemaPath:"".concat(w,".token"),value:m})]}),(0,l.jsx)(s.FormSubmit,{size:"large",children:h.t("authentication:resetPassword")})]}),d[5]=h,d[6]=P,d[7]=C,d[8]=m,d[9]=w,d[10]=t):t=d[10],t}},65582:(e,a,t)=>{t.d(a,{CreateFirstUserClient:()=>u});var n=t(95155),l=t(25866),i=t(92825),r=t(77168),s=t(78234),o=t(12115);let u=e=>{let{docPermissions:a,docPreferences:t,initialState:u,loginWithUsername:c,userSlug:d}=e,{config:{routes:{admin:m,api:h},serverURL:g},getEntityConfig:p}=(0,l.b)(),{getFormState:f}=(0,i.useServerFunctions)(),{t:v}=(0,r.d)(),{setUser:x}=(0,i.useAuth)(),w=o.useRef(null),j=p({collectionSlug:d}),b=o.useCallback(async e=>{let{formState:n,submitted:l}=e,i=(0,s.wN)(w),r=await f({collectionSlug:d,docPermissions:a,docPreferences:t,formState:n,operation:"create",schemaPath:d,signal:i.signal,skipValidation:!l});if(w.current=null,r&&r.state)return r.state},[d,f,a,t]);return(0,o.useEffect)(()=>{let e=w.current;return()=>{(0,s.eS)(e)}},[]),(0,n.jsxs)(i.Form,{action:"".concat(g).concat(h,"/").concat(d,"/first-register"),initialState:u,method:"POST",onChange:[b],onSuccess:e=>{x(e)},redirect:m,validationOperation:"create",children:[(0,n.jsx)(i.EmailAndUsernameFields,{className:"emailAndUsername",loginWithUsername:c,operation:"create",readOnly:!1,t:v}),(0,n.jsx)(i.PasswordField,{autoComplete:"off",field:{name:"password",label:v("authentication:newPassword"),required:!0},path:"password"}),(0,n.jsx)(i.ConfirmPasswordField,{}),(0,n.jsx)(i.RenderFields,{fields:j.fields,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:d,permissions:!0,readOnly:!1}),(0,n.jsx)(i.FormSubmit,{size:"large",children:v("general:create")})]})}},74289:(e,a,t)=>{t.d(a,{LogoutClient:()=>c});var n=t(19749),l=t(95155),i=t(92825),r=t(77168),s=t(35695),o=t(6001),u=t(12115);let c=e=>{let a,t,c,d,m,h=(0,n.c)(23),{adminRoute:g,inactivity:p,redirect:f}=e,{logOut:v,user:x}=(0,i.useAuth)(),{startRouteTransition:w}=(0,i.useRouteTransition)(),[j,b]=u.useState(!x),S=u.useRef(!1);h[0]!==g||h[1]!==p||h[2]!==f?(a=()=>(0,o.Q)({adminRoute:g,path:"/login".concat(p&&f&&f.length>0?"?redirect=".concat(encodeURIComponent(f)):"")}),h[0]=g,h[1]=p,h[2]=f,h[3]=a):a=h[3];let[F]=u.useState(a),{t:y}=(0,r.d)(),P=(0,s.useRouter)();h[4]!==p||h[5]!==v||h[6]!==F||h[7]!==P||h[8]!==w||h[9]!==y?(t=async()=>{let e=await v();if(b(e),!p&&e&&!S.current){i.toast.success(y("authentication:loggedOutSuccessfully")),S.current=!0,w(()=>P.push(F));return}},h[4]=p,h[5]=v,h[6]=F,h[7]=P,h[8]=w,h[9]=y,h[10]=t):t=h[10];let C=t;if(h[11]!==C||h[12]!==j||h[13]!==F||h[14]!==P||h[15]!==w?(c=()=>{j?w(()=>P.push(F)):C()},d=[C,j,F,P,w],h[11]=C,h[12]=j,h[13]=F,h[14]=P,h[15]=w,h[16]=c,h[17]=d):(c=h[16],d=h[17]),(0,u.useEffect)(c,d),j&&p){let e;return h[18]!==F||h[19]!==y?(e=(0,l.jsxs)("div",{className:"".concat("logout","__wrap"),children:[(0,l.jsx)("h2",{children:y("authentication:loggedOutInactivity")}),(0,l.jsx)(i.Button,{buttonStyle:"secondary",el:"link",size:"large",url:F,children:y("authentication:logBackIn")})]}),h[18]=F,h[19]=y,h[20]=e):e=h[20],e}return h[21]!==y?(m=(0,l.jsx)(i.LoadingOverlay,{animationDuration:"0ms",loadingText:y("authentication:loggingOut")}),h[21]=y,h[22]=m):m=h[22],m}},78229:(e,a,t)=>{t.d(a,{ForgotPasswordForm:()=>d});var n=t(19749),l=t(95155),i=t(25866),r=t(77168),s=t(92825),o=t(48493),u=t(12115);function c({description:e,heading:a}){return a?(0,l.jsxs)("div",{className:"form-header",children:[(0,l.jsx)("h1",{children:a}),!!e&&(0,l.jsx)("p",{children:e})]}):null}let d=()=>{var e;let a,t,d,m,h=(0,n.c)(17),{config:g,getEntityConfig:p}=(0,i.b)(),{admin:f,routes:v}=g,{user:x}=f,{api:w}=v,{t:j}=(0,r.d)(),[b,S]=(0,u.useState)(!1);h[0]!==p||h[1]!==x?(a=p({collectionSlug:x}),h[0]=p,h[1]=x,h[2]=a):a=h[2];let F=a,y=null==F||null==(e=F.auth)?void 0:e.loginWithUsername;h[3]!==y||h[4]!==j?(t=(e,a,t)=>{e.json().then(()=>{S(!0),a(j("general:submissionSuccessful"))}).catch(()=>{t(y?j("authentication:usernameNotValid"):j("authentication:emailNotValid"))})},h[3]=y,h[4]=j,h[5]=t):t=h[5];let P=t;if(h[6]!==w||h[7]!==g||h[8]!==P||h[9]!==b||h[10]!==y||h[11]!==j||h[12]!==x){m=Symbol.for("react.early_return_sentinel");e:{let e=y?{username:{initialValue:"",valid:!0,value:void 0}}:{email:{initialValue:"",valid:!0,value:void 0}};if(b){let e;h[15]!==j?(e=(0,l.jsx)(c,{description:j("authentication:checkYourEmailForPasswordReset"),heading:j("authentication:emailSent")}),h[15]=j,h[16]=e):e=h[16],m=e;break e}d=(0,l.jsxs)(s.Form,{action:"".concat(w,"/").concat(x,"/forgot-password"),handleResponse:P,initialState:e,method:"POST",children:[(0,l.jsx)(c,{description:y?j("authentication:forgotPasswordUsernameInstructions"):j("authentication:forgotPasswordEmailInstructions"),heading:j("authentication:forgotPassword")}),y?(0,l.jsx)(s.TextField,{field:{name:"username",label:j("authentication:username"),required:!0},path:"username",validate:e=>(0,o.Qq)(e,{name:"username",type:"text",blockData:{},data:{},event:"onChange",path:["username"],preferences:{fields:{}},req:{payload:{config:g},t:j},required:!0,siblingData:{}})}):(0,l.jsx)(s.EmailField,{field:{name:"email",admin:{autoComplete:"email"},label:j("general:email"),required:!0},path:"email",validate:e=>(0,o.Rp)(e,{name:"email",type:"email",blockData:{},data:{},event:"onChange",path:["email"],preferences:{fields:{}},req:{payload:{config:g},t:j},required:!0,siblingData:{}})}),(0,l.jsx)(s.FormSubmit,{size:"large",children:j("general:submit")})]})}h[6]=w,h[7]=g,h[8]=P,h[9]=b,h[10]=y,h[11]=j,h[12]=x,h[13]=d,h[14]=m}else d=h[13],m=h[14];return m!==Symbol.for("react.early_return_sentinel")?m:d}},87790:(e,a,t)=>{t.d(a,{LanguageSelector:()=>s});var n=t(19749),l=t(95155),i=t(77168),r=t(92825);t(12115);let s=e=>{let a,t,s=(0,n.c)(8),{languageOptions:o}=e,{i18n:u,switchLanguage:c}=(0,i.d)();if(s[0]!==c?(a=async e=>{await c(e.value)},s[0]=c,s[1]=a):a=s[1],s[2]!==u.language||s[3]!==o||s[4]!==a){let e;s[6]!==u.language?(e=e=>e.value===u.language,s[6]=u.language,s[7]=e):e=s[7],t=(0,l.jsx)(r.ReactSelect,{inputId:"language-select",isClearable:!1,onChange:a,options:o,value:o.find(e)}),s[2]=u.language,s[3]=o,s[4]=a,s[5]=t}else t=s[5];return t}},97260:(e,a,t)=>{t.d(a,{ToastAndRedirect:()=>s});var n=t(19749),l=t(92825),i=t(35695),r=t(12115);function s(e){let a,t,s=(0,n.c)(6),{message:o,redirectTo:u}=e,c=(0,i.useRouter)(),{startRouteTransition:d}=(0,l.useRouteTransition)(),m=r.useRef(!1);return s[0]!==o||s[1]!==u||s[2]!==c||s[3]!==d?(a=()=>{let e;return l.toast&&(e=setTimeout(()=>{l.toast.success(o),m.current=!0,d(()=>c.push(u))},100)),()=>{e&&clearTimeout(e)}},t=[c,u,o,d],s[0]=o,s[1]=u,s[2]=c,s[3]=d,s[4]=a,s[5]=t):(a=s[4],t=s[5]),(0,r.useEffect)(a,t),null}}}]);